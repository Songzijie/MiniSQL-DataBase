//
// Created by RenYi on 2017/6/7.
//

#include <iostream>
#include <BufferManager.h>

using namespace std;


int main() {
    BufferManager &bufferManager = BufferManager::GetInstance();

//    int a[10] = {1, 2, 3, 4, 5, 6};
//    blockNode.writeBlock(a, sizeof(a), 0);
//    int b[10];
//    blockNode.readBlock(b, sizeof(b), 0);
//    cout << b[1];

    for (int i = 0; i < 10; i++) {
        auto &blockNode = bufferManager.getBlock(MINI_TABLE, "tableName.table", i);
        char a[10] = "12345";
        blockNode.writeBlock(a, sizeof(a), 0);
    }

    for (int i = 9; i >= 0; i--) {
        auto &blockNode = bufferManager.getBlock(MINI_TABLE, "tableName.table", i);
        char a[10];
        blockNode.readBlock(a, sizeof(a), 0);
        cout << a << endl;
    }

    return 0;
}